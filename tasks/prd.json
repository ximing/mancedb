{
  "project": "LanceDB Admin",
  "branchName": "feat/electron-client",
  "baseBranch": "main",
  "description": "Electron Desktop Client - 为 LanceDB Admin 提供桌面客户端支持，基于 Electron 构建跨平台应用，复用现有 Web 端代码，同时提供本地文件系统访问和原生 LanceDB 数据库操作能力",
  "userStories": [
    {
      "id": "US-001",
      "title": "创建 Electron 基础项目结构",
      "description": "作为开发者，我需要在 apps/client 目录下建立 Electron 项目，为桌面客户端提供基础架构",
      "acceptanceCriteria": [
        "在 apps/client 创建完整的 Electron 项目结构（main, preload, renderer）",
        "配置 TypeScript 支持",
        "配置 Vite 作为构建工具",
        "配置 ESLint 和 Prettier",
        "添加开发启动脚本（hot reload）",
        "类型检查通过"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "集成 Web 应用到 Electron",
      "description": "作为用户，我希望桌面客户端与 Web 端有完全一致的用户界面和体验",
      "acceptanceCriteria": [
        "Electron 成功加载 apps/web 的构建产物",
        "复用 apps/web 的所有组件、样式和路由",
        "确保所有 Web 端功能在 Electron 中正常工作",
        "处理文件系统路径和路由的兼容性",
        "类型检查通过",
        "验证界面渲染正常"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Electron loads web app from dev server in development, built files in production. Uses HashRouter for Electron (file:// protocol) and BrowserRouter for browser."
    },
    {
      "id": "US-003",
      "title": "实现 Web 项目 Electron 适配改造",
      "description": "作为开发者，我需要改造 apps/web 项目，使其能同时支持浏览器和 Electron 环境",
      "acceptanceCriteria": [
        "添加 Electron 环境检测工具函数",
        "API 客户端支持两种模式：HTTP 请求（远程模式）和 IPC 调用（本地模式）",
        "配置运行时环境变量区分 electron/server 模式",
        "确保 Web 端在浏览器环境行为不变",
        "类型检查通过"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Created unified API client (api-client.ts) that supports both HTTP and IPC modes. Environment detection utilities already existed. Updated all API files to use the new apiClient. Extended ElectronAPI with invoke method for IPC communication."
    },
    {
      "id": "US-004",
      "title": "实现本地文件系统访问",
      "description": "作为用户，我希望通过原生对话框浏览和选择本地数据库文件夹",
      "acceptanceCriteria": [
        "实现 IPC 通道：打开文件夹选择对话框",
        "在 UI 中添加'打开本地数据库'按钮（Electron 环境显示）",
        "支持选择文件夹路径并传递给后端",
        "处理无权限/路径不存在等错误情况",
        "类型检查通过"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Implemented IPC channel 'dialog:openDirectory' in main process. Added Browse button to connection form that only shows in Electron. Uses dialog.showOpenDialog with properties: ['openDirectory'] to select folders."
    },
    {
      "id": "US-005",
      "title": "实现原生 LanceDB 连接模式",
      "description": "作为用户，我希望 Electron 能直接操作本地 LanceDB 数据库，无需启动后端服务",
      "acceptanceCriteria": [
        "在 Electron main 进程集成 LanceDB Node.js SDK",
        "实现 IPC API 映射层（复用现有 HTTP API 接口定义）",
        "支持的操作：连接数据库、获取表列表、查询数据、创建/删除表",
        "错误处理：数据库不存在、格式错误、权限问题",
        "类型检查通过"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "实现连接模式切换 UI",
      "description": "作为用户，我希望在应用启动时选择工作模式：连接远程服务或直接打开本地数据库",
      "acceptanceCriteria": [
        "添加启动模式选择界面（远程服务 / 本地数据库）",
        "远程模式：输入服务器地址和端口",
        "本地模式：打开文件夹选择对话框",
        "记住上次选择的模式/地址",
        "类型检查通过",
        "验证界面和交互正常"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "添加系统集成特性",
      "description": "作为用户，我希望客户端有原生应用的体验（菜单、快捷键、托盘等）",
      "acceptanceCriteria": [
        "配置应用菜单（macOS: 顶部菜单栏，Windows/Linux: 窗口菜单）",
        "支持键盘快捷键（刷新、切换开发者工具等）",
        "窗口状态管理（记住大小和位置）",
        "处理多实例启动（单实例锁定）",
        "添加 Dock/任务栏图标",
        "类型检查通过"
      ],
      "priority": 7,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "实现自动更新检查",
      "description": "作为用户，我希望客户端能检查并提示新版本更新",
      "acceptanceCriteria": [
        "集成 electron-updater",
        "启动时检查更新",
        "发现新版本时显示提示对话框",
        "支持手动检查更新菜单项",
        "类型检查通过"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "配置跨平台打包",
      "description": "作为开发者，我需要配置 Electron Builder 生成各平台的安装包",
      "acceptanceCriteria": [
        "配置 electron-builder",
        "支持 macOS (.dmg, .zip)",
        "支持 Windows (.exe, .msi)",
        "支持 Linux (.AppImage, .deb)",
        "配置应用图标和元数据",
        "构建流程能在 CI 中运行",
        "类型检查通过"
      ],
      "priority": 9,
      "passes": false,
      "notes": ""
    }
  ]
}
