{
  "project": "ManceDB",
  "branchName": "ralph/optional-connection-credentials",
  "description": "数据库连接凭证可选 - 支持无账号密码的本地数据库和S3公开桶连接",
  "userStories": [
    {
      "id": "US-001",
      "title": "后端 DTO 移除凭证必填验证",
      "description": "作为开发者，我需要让后端接受无凭证的连接配置。",
      "acceptanceCriteria": [
        "在 CreateConnectionDto 中将 accessKeyId 字段标记为 @IsOptional()",
        "在 CreateConnectionDto 中将 secretAccessKey 字段标记为 @IsOptional()",
        "在 UpdateConnectionDto 中同样移除凭证必填验证",
        "确保空字符串和 undefined 都被接受为有效值",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Converted interfaces to classes with @IsOptional() decorators on s3AccessKey, s3SecretKey, and all other optional fields"
    },
    {
      "id": "US-002",
      "title": "连接服务支持空凭证",
      "description": "作为开发者，我需要确保 LanceDB/S3 连接逻辑能正确处理空凭证。",
      "acceptanceCriteria": [
        "检查 ConnectionManager 创建 S3 连接时的凭证处理逻辑",
        "确保空凭证时正确创建匿名 S3 客户端或本地连接",
        "验证非空凭证时原有功能不受影响",
        "添加空凭证场景的错误处理和提示",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Modified ConnectionService.testConnection() and DatabaseService.connectToDatabase() to support empty S3 credentials. ConnectionManager already handles empty credentials correctly."
    },
    {
      "id": "US-003",
      "title": "前端表单移除凭证必填验证",
      "description": "作为用户，我可以在创建连接时不填写账号密码。",
      "acceptanceCriteria": [
        "找到连接创建/编辑表单组件",
        "移除账号字段的必填验证规则",
        "移除密码字段的必填验证规则",
        "确保表单提交时允许空值",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Removed required validation from s3AccessKey, s3SecretKey, and dbPassword fields in connection-form.tsx"
    },
    {
      "id": "US-004",
      "title": "前端表单添加可选标注",
      "description": "作为用户，我能清楚知道账号密码是可选填写的。",
      "acceptanceCriteria": [
        "在账号输入框标签后添加 (可选) 标注",
        "在密码输入框标签后添加 (可选) 标注",
        "添加提示文字说明何时需要填写（如 S3 非公开桶）",
        "保持现有表单的样式一致性",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Added (Optional) label to Access Key, Secret Key, Username, and Password fields. Updated help text to clarify when credentials are required."
    },
    {
      "id": "US-005",
      "title": "连接列表显示凭证状态",
      "description": "作为用户，我能在连接列表中看出哪些连接有凭证、哪些没有。",
      "acceptanceCriteria": [
        "在连接列表项或详情中显示凭证状态（有/无）",
        "使用图标或标签直观展示",
        "不影响列表的现有功能和布局",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Added hasCredentials field to ConnectionDto and ConnectionPublicInfo. UI shows 'Authenticated' (green) or 'Public' (gray) badge for S3 connections."
    }
  ]
}